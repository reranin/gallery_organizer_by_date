# 🎯 Gallery Organizer by Date

**سازماندهی هوشمند فایل‌های عکس و فیلم بر اساس تاریخ**

## ✨ ویژگی‌ها

- 🗓️ **سازماندهی بر اساس تاریخ**: فایل‌ها در فولدرهای تاریخ قرار می‌گیرند
- 🔍 **تشخیص تکراری پیشرفته**: فایل‌های تکراری در فولدر duplicate قرار می‌گیرند
- 📸 **تشخیص اسکرین‌شات**: اسکرین‌شات‌ها جداگانه مدیریت می‌شوند
- 📱 **تشخیص شبکه‌های اجتماعی**: فایل‌های اینستاگرام، واتساپ و تلگرام جداگانه
- 🎬 **پشتیبانی از ویدیو**: MP4, MOV, AVI و سایر فرمت‌ها
- 🖼️ **پشتیبانی از تصاویر**: JPG, PNG, HEIC, DNG و سایر فرمت‌ها
- 🚀 **عملکرد سریع**: فقط از کتابخانه‌های پایتون استفاده می‌کند
- 📊 **گزارش کامل**: لاگ کامل و نمایش پیشرفت
- 📁 **سازماندهی هوشمند**: فایل‌های duplicate، unsorted و شبکه‌های اجتماعی در فولدرهای 500 تایی
- 🎯 **دقت بالا**: فقط بر اساس تاریخ ایجاد واقعی (creation_date)

## 🚀 نصب

### پیش‌نیازها
- Python 3.7+
- pip

### نصب کتابخانه‌ها
```bash
pip install hachoir
```

## 📖 نحوه استفاده

### اجرای ساده
```bash
python3 photo_organizer.py
```

### مراحل اجرا
1. **فولدر منبع**: مسیر فولدر عکس‌های شما
2. **فولدر مقصد**: مسیر فولدر سازماندهی شده

### مثال
```bash
🔍 فولدر منبع: /Users/username/Pictures/2024
📂 فولدر مقصد: /Users/username/Pictures/Organized
```

## 🏗️ ساختار فولدر نهایی

```
Organized/
├── 2024-01-15/          # فایل‌های 15 ژانویه
│   ├── photo1.jpg
│   ├── photo2.png
│   └── video1.mp4
├── 2024-01-16/          # فایل‌های 16 ژانویه
│   ├── photo3.jpg
│   └── video2.mov
├── screenshots/          # اسکرین‌شات‌ها
├── social-media/         # فایل‌های شبکه‌های اجتماعی
│   ├── instagram/        # فایل‌های اینستاگرام
│   │   ├── batch_001/   # فایل‌های 1-500
│   │   └── batch_002/   # فایل‌های 501-1000
│   ├── whatsapp/         # فایل‌های واتساپ
│   │   ├── batch_001/   # فایل‌های 1-500
│   │   └── batch_002/   # فایل‌های 501-1000
│   └── telegram/         # فایل‌های تلگرام
│       ├── batch_001/   # فایل‌های 1-500
│       └── batch_002/   # فایل‌های 501-1000
├── duplicate/            # فایل‌های تکراری (سازماندهی شده)
│   ├── batch_001/       # فایل‌های تکراری 1-500
│   ├── batch_002/       # فایل‌های تکراری 501-1000
│   └── batch_003/       # فایل‌های تکراری 1001-1500
├── unsorted/             # فایل‌های بدون تاریخ (سازماندهی شده)
│   ├── batch_001/       # فایل‌های 1-500
│   ├── batch_002/       # فایل‌های 501-1000
│   └── batch_003/       # فایل‌های 1001-1500
└── photo_organizer.log  # فایل لاگ
```

## 🔧 قابلیت‌های پیشرفته

### تشخیص شبکه‌های اجتماعی هوشمند
- **تشخیص ترکیبی**: نام فایل + متادیتا
- **پلتفرم‌های پشتیبانی شده**: اینستاگرام، واتساپ، تلگرام
- **سازماندهی batch**: فایل‌ها در فولدرهای 500 تایی
- **الگوهای تشخیص**:
  - **واتساپ**: `wa`, `whatsapp`, `img-`, `img_`
  - **اینستاگرام**: `ig`, `instagram`, `insta`, `ig_`, `insta_`
  - **تلگرام**: `tg`, `telegram`, `photo_`, `document_`, `tg_`

### تشخیص تکراری هوشمند
- **تشخیص در منبع**: فایل‌های تکراری در فولدرهای مختلف منبع شناسایی می‌شوند
- **بررسی نام + سایز**: تشخیص دقیق بر اساس نام فایل و اندازه
- **سازماندهی batch**: فایل‌های تکراری در فولدرهای 500 تایی

### مدیریت فایل‌های بدون تاریخ
- **فقط creation_date**: فقط از تاریخ ایجاد واقعی استفاده می‌کند
- **بدون fallback**: از زمان کپی/انتقال استفاده نمی‌کند
- **سازماندهی batch**: فایل‌های بدون تاریخ در فولدرهای 500 تایی

### مدیریت خطا
- فایل‌های خراب به unsorted منتقل می‌شوند
- فایل‌های غیرعکس نادیده گرفته می‌شوند
- لاگ کامل از تمام عملیات

### پشتیبانی از فرمت‌ها
#### تصاویر
- JPG, JPEG, PNG, TIFF, BMP
- GIF, HEIC, DNG, PSD, WebP

#### ویدیوها
- MP4, MOV, AVI, MKV, WMV
- FLV, M4V, 3GP, WebM

## 📋 مثال سناریو

### فولدر منبع (پیچیده)
```
سفر تابستانی/
├── ساحل/
│   ├── IMG_001.jpg      # 15 جولای
│   ├── IMG_003.jpg      # 15 جولای
│   └── IMG_004.jpg      # 15 جولای (تکراری IMG_003)
├── رستوران/
│   ├── IMG_005.jpg      # 16 جولای
│   └── IMG_004.jpg      # 15 جولای (تکراری IMG_003)
├── غروب/
│   ├── IMG_003.jpg      # 15 جولای (فایل اصلی)
│   └── IMG_004.jpg      # 15 جولای (تکراری)
├── شبکه‌های اجتماعی/
│   ├── IMG-20241215-WA0001.jpg  # واتساپ
│   ├── IG_20241215_143022.jpg   # اینستاگرام
│   └── photo_2024-12-15_14-30.jpg # تلگرام
└── IMG_007.jpg          # فایل بدون تاریخ
```

### نتیجه نهایی
```
Organized/
├── 2024-07-15/
│   ├── IMG_001.jpg      # فایل اصلی
│   └── IMG_003.jpg      # فایل اصلی
├── 2024-07-16/
│   └── IMG_005.jpg      # فایل اصلی
├── social-media/
│   ├── whatsapp/
│   │   └── batch_001/
│   │       └── IMG-20241215-WA0001.jpg
│   ├── instagram/
│   │   └── batch_001/
│   │       └── IG_20241215_143022.jpg
│   └── telegram/
│       └── batch_001/
│           └── photo_2024-12-15_14-30.jpg
├── duplicate/
│   └── batch_001/
│       ├── IMG_004.jpg  # تکراری اول
│       ├── IMG_004_1.jpg # تکراری دوم
│       └── IMG_004_2.jpg # تکراری سوم
└── unsorted/
    └── batch_001/
        └── IMG_007.jpg  # فایل بدون تاریخ
```

## 🛠️ توسعه

### ساختار کد
- `PhotoOrganizer`: کلاس اصلی
- `extract_metadata`: استخراج متادیتا
- `detect_social_media_file`: تشخیص شبکه‌های اجتماعی از نام فایل
- `detect_social_media_from_metadata`: تشخیص شبکه‌های اجتماعی از متادیتا
- `organize_social_media_files`: سازماندهی فایل‌های شبکه‌های اجتماعی
- `is_duplicate_in_source`: تشخیص تکراری در کل منبع
- `organize_duplicate_files`: سازماندهی فایل‌های تکراری
- `organize_unsorted_files`: سازماندهی فایل‌های بدون تاریخ
- `process_file`: پردازش فایل

### کتابخانه‌های استفاده شده
- `hachoir`: استخراج متادیتا
- `pathlib`: مدیریت مسیرها
- `shutil`: عملیات فایل
- `logging`: سیستم لاگ

## 🔍 منطق تشخیص تکراری

### اولویت‌بندی
1. **تشخیص شبکه‌های اجتماعی**: بررسی فایل‌های اینستاگرام، واتساپ و تلگرام
2. **تشخیص در منبع**: بررسی فایل‌های تکراری در کل فولدر منبع
3. **تشخیص در مقصد**: بررسی فایل‌های تکراری در فولدر مقصد
4. **سازماندهی**: انتقال به فولدرهای batch مناسب

### معیارهای تشخیص
- **نام فایل**: یکسان
- **سایز فایل**: یکسان
- **محل**: فولدر duplicate با سازماندهی batch

## 📱 منطق تشخیص شبکه‌های اجتماعی

### روش تشخیص ترکیبی
1. **تشخیص از نام فایل**: الگوهای مشخص برای هر پلتفرم
2. **تشخیص از متادیتا**: بررسی فیلدهای software، comment و سایر فیلدها
3. **اولویت**: نام فایل (دقیق‌تر) سپس متادیتا

### الگوهای تشخیص
- **واتساپ**: `IMG-YYYYMMDD-WAXXXX.jpg`, `wa_`, `whatsapp_`
- **اینستاگرام**: `IG_YYYYMMDD_HHMMSS.jpg`, `ig_`, `instagram_`
- **تلگرام**: `photo_YYYY-MM-DD_HH-MM-SS.jpg`, `tg_`, `telegram_`

## 📅 منطق استخراج تاریخ

### اولویت
- **فقط creation_date**: تاریخ ایجاد واقعی فایل
- **بدون fallback**: از last_modification یا file_mtime استفاده نمی‌کند

### مزایا
- دقت 100% در سازماندهی
- فایل‌های ویرایش شده تاریخ اصلی خود را حفظ می‌کنند
- سازماندهی بر اساس زمان واقعی عکسبرداری/ضبط

## 📄 مجوز

این پروژه تحت مجوز MIT منتشر شده است.

## 🤝 مشارکت

برای مشارکت در پروژه:
1. Fork کنید
2. Branch جدید ایجاد کنید
3. تغییرات را commit کنید
4. Pull Request ارسال کنید

## 📞 پشتیبانی

برای گزارش مشکل یا پیشنهاد:
- Issue در GitHub ایجاد کنید
- یا ایمیل ارسال کنید

---

**ساخته شده با ❤️ برای سازماندهی بهتر خاطرات دیجیتال**

**نسخه**: 2.1.0 - با قابلیت تشخیص شبکه‌های اجتماعی و سازماندهی پیشرفته 
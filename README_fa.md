# سیستم پیشرفته سازماندهی عکس و فیلم 📸

سیستمی قدرتمند برای سازماندهی خودکار عکس‌ها، فیلم‌ها و فایل‌های RAW از دوربین‌ها و موبایل‌های مختلف بر اساس تاریخ و دستگاه.

## ✨ ویژگی‌های کلیدی

### 📱 پشتیبانی از دستگاه‌های متعدد
- **دوربین‌های DSLR**: Canon, Nikon, Sony
- **موبایل‌ها**: iPhone, Samsung, Xiaomi
- **دوربین‌های اکشن**: GoPro, DJI
- قابلیت افزودن دستگاه‌های جدید از طریق فایل پیکربندی

### 📅 سازماندهی هوشمند بر اساس تاریخ
- **ادغام رویدادهای روزانه**: تمام عکس‌ها و فیلم‌های یک روز در یک فولدر
- ساختار فولدر: `سال/ماه/روز/دستگاه`
- استخراج تاریخ از متادیتا، نام فایل یا تاریخ سیستم

### 🎯 قابلیت‌های پیشرفته
- **تشخیص فایل‌های تکراری** با استفاده از هش MD5
- **پشتیبانی از فایل‌های RAW** تمام برندها
- **پردازش موازی** برای سرعت بالا
- **استخراج متادیتا** از سه منبع مختلف (Pillow, exifread, hachoir)
- **گزارش‌دهی کامل** با آمار دقیق

## 🚀 نصب و راه‌اندازی

### 1. نصب Python (نسخه 3.7 یا بالاتر)
```bash
python --version
```

### 2. نصب وابستگی‌ها
```bash
pip install -r requirements_enhanced.txt
```

### 3. بررسی نصب
```bash
python test_organizer.py
```

## 📖 نحوه استفاده

### استفاده ساده
```bash
python enhanced_photo_organizer.py
```
سپس مسیر فولدر منبع و مقصد را وارد کنید.

### استفاده با آرگومان
```bash
python enhanced_photo_organizer.py /path/to/source /path/to/destination
```

### استفاده با فایل پیکربندی سفارشی
```bash
python enhanced_photo_organizer.py /source /destination my_config.yaml
```

## ⚙️ پیکربندی

فایل `device_config.yaml` شامل تنظیمات دستگاه‌ها و قوانین سازماندهی است:

### تعریف دستگاه جدید
```yaml
devices:
  my_camera:
    name: "دوربین من"
    type: "dslr"
    manufacturer: "Brand"
    models: ["Model1", "Model2"]
    raw_extensions: [".raw"]
    folder_prefix: "MyCamera"
    priority: 1
```

### تنظیمات سازماندهی
```yaml
organization:
  folder_structure: "YYYY/YYYY-MM-DD/Device"
  max_files_per_folder: 500
  merge_daily_events: true
  separate_raw_folder: true
```

## 📊 ساختار فولدر خروجی

```
organized_photos/
├── 2024/
│   ├── 01-January/
│   │   ├── 2024-01-15/
│   │   │   ├── Canon_5D/
│   │   │   │   ├── IMG_001.jpg
│   │   │   │   └── RAW/
│   │   │   │       └── IMG_001.cr2
│   │   │   ├── iPhone/
│   │   │   │   └── IMG_002.heic
│   │   │   └── Samsung/
│   │   │       └── SAM_003.jpg
│   │   └── 2024-01-16/
│   │       └── ...
│   └── 02-February/
│       └── ...
├── Duplicates/
│   └── batch_001/
├── Unsorted/
│   └── batch_001/
└── report_20240115_143022.json
```

## 🔍 تست عملکرد

برای تست عملکرد سیستم:
```bash
python test_organizer.py
```

این اسکریپت:
- بررسی نصب کتابخانه‌ها
- ایجاد فایل‌های تست
- اجرای سازماندهی نمونه
- نمایش آمار و نتایج

## 📈 گزارش‌گیری

پس از اتمام سازماندهی، یک فایل JSON با اطلاعات کامل ایجاد می‌شود:
- تعداد فایل‌های پردازش شده
- توزیع بر اساس دستگاه
- توزیع بر اساس تاریخ
- فایل‌های تکراری
- خطاها

## 🛠️ عیب‌یابی

### مشکل: فایل‌های RAW شناسایی نمی‌شوند
- پسوند فایل را در `device_config.yaml` اضافه کنید
- مطمئن شوید کتابخانه rawpy نصب شده است

### مشکل: تاریخ فایل‌ها اشتباه است
- متادیتای فایل را با ابزارهای دیگر بررسی کنید
- از الگوهای تاریخ در نام فایل استفاده کنید

### مشکل: سرعت پایین
- پردازش موازی را فعال کنید
- تعداد worker ها را افزایش دهید

## 🤝 مشارکت

برای بهبود این پروژه:
1. Fork کنید
2. Branch جدید ایجاد کنید
3. تغییرات را Commit کنید
4. Pull Request بفرستید

## 📄 لایسنس

این پروژه تحت لایسنس MIT منتشر شده است.

## 💡 نکات مهم

1. **پشتیبان‌گیری**: همیشه قبل از سازماندهی از فایل‌های مهم پشتیبان بگیرید
2. **فضای دیسک**: مطمئن شوید فضای کافی در مقصد دارید
3. **دسترسی**: اطمینان حاصل کنید به فولدرها دسترسی خواندن/نوشتن دارید
4. **فایل‌های بزرگ**: برای فایل‌های RAW بزرگ، زمان بیشتری صبر کنید

## 📞 پشتیبانی

در صورت بروز مشکل:
- فایل لاگ را بررسی کنید
- اسکریپت تست را اجرا کنید
- Issue در GitHub ایجاد کنید

---

ساخته شده با ❤️ برای عکاسان و فیلمبرداران